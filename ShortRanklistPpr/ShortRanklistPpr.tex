% AER-Article.tex for AEA last revised 22 June 2011
\documentclass[WP]{AEA}

% The mathtime package uses a Times font instead of Computer Modern.
% Uncomment the line below if you wish to use the mathtime package:
%\usepackage[cmbold]{mathtime}
% Note that miktex, by default, configures the mathtime package to use commercial fonts
% which you may not have. If you would like to use mathtime but you are seeing error
% messages about missing fonts (mtex.pfb, mtsy.pfb, or rmtmi.pfb) then please see
% the technical support document at http://www.aeaweb.org/templates/technical_support.pdf
% for instructions on fixing this problem.

% Note: you may use either harvard or natbib (but not both) to provide a wider
% variety of citation commands than latex supports natively. See below.

% Uncomment the next line to use the natbib package with bibtex 
\usepackage{natbib}
\usepackage{hyperref}
% Uncomment the next line to use the harvard package with bibtex
%\usepackage[abbr]{harvard}

\usepackage{ amssymb }

\usepackage{amsmath}

%for \resizebox
\usepackage{graphicx}

\usepackage{calrsfs}

% This command determines the leading (vertical space between lines) in draft mode
% with 1.5 corresponding to "double" spacing.
\draftSpacing{1.5}

\newtheorem{thm}{Theorm}
\newtheorem{prop}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{deff}{Definition}
\newtheorem{conj}{Conjecture}

\begin{document}

\title{A Theory Paper on Rank List Length}
\shortTitle{List Length}
\author{Tyler Hoppenfeld}
\date{\today}
\pubMonth{Month}
\pubYear{Year}
\pubVolume{Vol}
\pubIssue{Issue}
\JEL{}
\Keywords{}

%\begin{abstract}

\maketitle


\section{Introduction}

Centralized matching markets encompass only a small fraction of the labor market, however the study of centralized matching markets  sheds light on the broader matching of employees to jobs. There are also a variety of markets, including academic job markets and some entry-level job markets for new college graduates, that are decentralized and sometimes chaotic despite having synchronized start dates for a large number of applicants to very similar jobs. A better understanding of the strengths and limits of centralized markets could help us understand what inefficiencies exist in these markets, whether more efficient solutions are possible, and even allow for the design of more efficient markets. 

Theory tells us that there is no matching mechanism that reliably produces a stable outcome wherein both sides have the incentive to accrurately report their preferences \citep{Roth1985}, however in practice many matching markets persist with both sides (apparently) reporting their preferences honestly  \citep{Roth1991}. This result can be explained by the fact that in many of these markets the set of stable matchings is quite small, and under some realistic assumptions only agents with multiple potential stable matches have an incentive to lie about their preferences.  For example, in the National Resident Matching Program (NRMP) matching of recently graduated physicians to resident positions, all but approximately 10 of 20,000 participants have a unique partner in the set of all stable matchings \citep{Roth1999a}, and so in all but a very small number of cases any misrepresentation of preferences would lead to an identical or less-preferred outcome for the agent misrepresenting their preferences. 


Roth and Peranson posit that the small set of stable matchings (SSM) of these markets is driven by the correlated nature of preferences, and by the fact that for highly correlated preferences, the SSM is very small.  In a parallel argument, they note that finite preference lists, as is the case with the NRMP, lead to a very small SSM as well.  They use simulation to demonstrate these results, and (\cite{Immorlica2005} and then \cite{Kojima2009} build on this with the theoretical result that as the number of market participants grows, the SSM becomes arbitrarily small as a fraction of market size. This theoretical work takes short preference lists to be a feature of preferences rather than a feature of the market mechanism, and uses a highly restrictive preference structure to accomplish that. 

The primary restriction on preferences that this paper relaxes is on the existence of broadly acceptable `elite' applicants. In prior literature where hospitals form $k$ length preference lists over $n$ doctors and preference lists of length $k$,  for any $\epsilon_a$, no more than $k/\epsilon_a$ doctors can be acceptable to $n\epsilon_a$ hospitals. That is to say that as the market grows, nearly all doctors are unacceptable to nearly all hospitals. (See appendix \ref{appendix:immorlica_pref} for more).  
In this paper I examine short rank lists in a setting that allows for more realistic preference formation. I construct preferences where all participants on each side in a matching market broadly share preferences over their potential matches, requiring short rank-lists does not introduce strategic behavior, and the fraction of agents with multiple stable matches has a positive limit as the market becomes infinitely large.

Additionally, I introduce an algorithm to partition the market into subsets that have limited interdependence, and prove several useful properties of these partitions.

\section{Model}
\subsection{Preliminary Definitions}

Let there be $D$ doctors and $H$ hospitals, each of which might hire at most one doctor. Doctors and hospitals together form the universe of participants $U = D \cup H$.  Each doctor $d$ has a strict preference relation over the set of hospitals he could be matched with and being unmatched, which we denote as being matched with oneself. Therefore we say that the doctor has preferences $\succ_{d}$ over the set $H \cup \{d\}$. Each hospital $h$ likewise has preferences $\succ_h$ over $D \cup \{h\}$. 

A matching $\phi$ is a mapping from $U$ onto itself such that 
\begin{itemize}
	\item for every $d$, $|\phi(d)| = 1$, $\phi(d) \in H \cup \{d\} $ and for every  $h$, $|\phi(h)| = 1$, $\phi(h) \in D \cup \{h\}$
	\item $\phi(d) = h$ iff $\phi(h) = d$.  That is, a matching is simply a one-to-one assignment of doctors to hospitals with the possibility of being unmatched. We also denote the set of all participants not matched to themselves in $\phi$ as $\{\phi\}$.
\end{itemize}
We say a matching $\phi$ is blocked by a pair $\{d,h\}$ if $h \succ_d \phi(h)$ and $d \succ_h \phi(h)$. It is individually rational if $\forall a \in U ,\phi(a) \succ_a a \vert \phi(a) = a$. A matching is stable if it is individually rational and not blocked.

\subsection{Market Participants}

The market consists of $n$ doctors  indexed $\{ d_1, d_2, ... ,d_n\}$ and  $n$ hospitals  indexed $\{ h_1, h_2, ... ,h_n\}$ The degree of preference variation among doctors is indexed by the variable $k_d$, while the degree of preference variation among hospitals is indexed by $k_h$.
	
Each doctor forms their preference list by first ranking all hospitals according to their index number, so $h_1$ is the doctor's favorite and $h_n$ their least favorite (the doctor's least favorite option is to be unmatched).  
Doctor each doctor $d_a$ randomizes their preferences over hospitals $\{h_{a-k_d},...,h_{a+k_d}\}$, leaving their other preferences unchanged.  Doctors $d_a$, $a \in [1,k_d+1]$ randomize preferences over hospitals  $\{h_{1},...,h_{a+k_d}\}$, and doctors $d_a$, $a \in [n-k_d,n]$ randomize preferences over hospitals  $\{h_{a-k_d},...,h_{n}\}$.  
The hospitals form their preferences in the same way, using $k_h$ in place of $k_d$.

In this way, we arrive at a preference structure where agents all broadly agree on which matches are desirable, but have idiosyncratic preference variation.

\section{Analysis}

\subsection{rank list lengths}
\begin{lemma}
	For any stable matching $(d_a,h_b)$, $|a-b| < max(k_d,k_h)+2$
\end{lemma}
\begin{proof}
	Call $k = max(k_d,k_h)$
	First consider the match $(d_1,h_a), a > k+1$.  $(d_1,h_{k+1})$ form a blocking pair, because $h_{k+1} \succ_{d_1} h_{k+2} \succ_{d_1} h_{k+3} \succ_{d_1} h_{k+4}...$, and $d_1$ is the first choice of $h_{k+1}$.  Thus $(d_1,h_a), a > k+1$ are not matched in a stable matching.
	
	Likewise, $(d_a,h_1), a > k+1$ are not matched in a stable matching.

	Now consider $(d_2,h_a), a > k+2$.  $(d_2,h_{k+2})$ form a blocking pair, because $h_{k+2} \succ_{d_2} h_{k+3} \succ_{d_2} h_{k+4} \succ_{d_2} h_{k+5}...$, and since $h_{k+2}$ is not matched to $d_1$,  $h_{k+2}$ prefers $d_2$ to their current match.  Thus $(d_2,h_a), a > k+2$ are not matched in a stable matching.

	Likewise, $(d_a,h_2), a > k+2$ are not matched in a stable matching.

	continuing by induction, we see that no pair $(d_a,h_b)$, $|a-b| > k+1$ is included in a stable matching.


\end{proof}

	




\bibliographystyle{aea}
\bibliography{../../library}

% The appendix command is issued once, prior to all appendices, if any.
\appendix



\section{ Appendix}

\subsection{Deferred Acceptance}
The deferred acceptance mechanism is a mainstay of this paper. In the doctor-proposing version of this mechanism, the algorithm iteritavely selects a doctor $d$ who proposes to their most preferred hospital that has not yet rejected them, unless the doctor has been rejected by all hospitals who they prefer to being unmatched.  If the hospital prefers the proposing doctor to the current tenative assignment, the hospital holds the doctor's proposal and rejects their current assignment (if one exists). Otherwise, the hospital rejects $d$.  This process repeats until all doctors are either tentatively matched or have run out of proposals to make, and arrives at a stable matching that is weakly preferred by all doctors to any other stable matching.  We call this the doctor-optimal stable match, because it is weakly preferred by all doctors to any other stable match.  A parallel result exists for the hospital-proposing algorithm.



\subsection{Review of Preferences From \cite{Immorlica2005}} \label{appendix:immorlica_pref}

\cite{Immorlica2005} construct preferences as follows (subtituting men and women for doctors and hospitals):
\begin{quote}
	Let $\mathcal{D}$ be an \emph{arbitrary} fixed distribution over the set of women such that the probability of each woman in 
	$\mathcal{D}$ is nonzero. Intuitively, having a high probability in $\mathcal{D}$ indicates that a woman is popular. 
	The preference lists are constructed by picking each entry of the list according to $\mathcal{D}$, and removing the repetitions. More precisely, we construct a random list $(l_1, ..., l_k)$
	of $k$ women as follows. At step $i$, repeatedly select women $w$ independently according to $\mathcal{D}$ until $w \notin (l_1, ..., l_{i-1})$ and then set $l_i = w$.
\end{quote}

\begin{lemma}
	For any $\varepsilon_a$, no more than $k/\varepsilon_a$ women can be acceptable $\varepsilon_a$ fraction of men.
\end{lemma}
\begin{proof}
	Proceeding by contradiction, suppose the set of women who are acceptable to $\varepsilon_a$ fraction of men is $J = \{j_1,..., j_p\}$, with $p > k/\varepsilon_a$. 

	Each woman's probability in $\mathcal{D}$ is at least $\varepsilon_a/k$

	The on any draw thee liklihood of choosing some $j\in J$ from $\mathcal{D}$ is at least $$p \frac{\varepsilon_a}{k} > \frac{k}{\varepsilon_a}\frac{\varepsilon_a}{k} = 1$$

	This is a contradiction.

	$\square$


\end{proof}

\end{document}

